- name: Dark UI colors
  description: Provide a dark UI color theme in order to save battery on devices with AMOLED screens.
  context: Screen is one of the major source of power consumption on mobile devices. Apps that require heavy usage of screen can have a big impact on battery life.
  solution: Some mobile devices are shipped with AMOLED screens, which are more energy savior when displaying dark colors. Provide a UI with dark background colors, while preserving the contrast of foreground elements. In some cases, it might be reasonable to allow users to choose between a light and a dark theme. The dark theme can also be activated upon a special trigger (e.g., when battery is running low).
  example:
  occurrences_android:
    issues:
      - https://github.com/rdoeffinger/Dictionary/issues/43
      - https://github.com/bitcoin-wallet/bitcoin-wallet/issues/338
      - https://github.com/mikifus/padland/issues/4
      - https://github.com/TeamAmaze/AmazeFileManager/issues/336
      - https://github.com/vishesh/sealnote/issues/47
      - https://github.com/Wilm0r/giggity/issues/42
      - https://github.com/AntennaPod/AntennaPod/issues/1881
      - https://github.com/m0ppers/ElpeEfpeAndroid/issues/3
      - https://github.com/artetxem/mitzuli/issues/26
      - https://github.com/nextcloud/news-android/issues/512
      - https://github.com/Yubico/yubioath-android/issues/49
      - https://github.com/rosenpin-deprecated/More-For-GO/issues/23
      - https://github.com/signalapp/Signal-Android/issues/5470
      - https://github.com/vector-im/riot-android/issues/507
    commits:
      - https://github.com/ligi/SurvivalManual/commit/3b7c3b33ac6562878cd2ac628b9f33c64670a6d3
      - https://github.com/markusfisch/ShaderEditor/commit/27628f615cf97688f40f601c0ea315bb60f0db91
    pull_requests:
      -
  occurrences_ios:
    issues:
    commits:
    pull_requests:
  references:
    - authors: Agolli T, Pollock L, Clause J.
      title: Investigating decreasing energy usage in mobile apps via indistinguishable color changes.
      url: http://ieeexplore.ieee.org/abstract/document/7972715/
    - authors: Linares-Vásquez M, Bernal-Cárdenas C, Bavota G, Oliveto R, Di Penta M, Poshyvanyk D.
      title: "GEMMA: multi-objective optimization of energy consumption of GUIs in Android apps."
      url: http://ieeexplore.ieee.org/abstract/document/7965245/

- name: Polite poller
  description: Whenever an attempt to access a resource has failed, increase the interval of time waited before asking access to that same resource.
  context:
  solution: Enlarge (user configurable) interval to renew push connection and check for new messages actively after connection is established (either linear or exponential growth)
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/186
      - https://github.com/nextcloud/android/issues/1561

- name: Affordable
  description: Avoid performing tasks that are not visible to the user and quickly become obsolete.
  context: When displaying real-time information, the data presented to the user has to be constantly updated. However, depending on the view that is being displayed to the user, this data might not be entirely presented. The same happens when the app goes to background. Since the data quickly becomes obsolete the phone is using resources unnecessarily.
  solution: Select a concise set of data that should be presented to the user and enable/disable update and processing tasks depending on their effect on the data which is visible to the user. FIXME
  example:
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/186
    commits:
      - https://github.com/greenaddress/GreenBits/commit/e16925c2231a0f8ef82636b3f7df9b69316ab53a
      - https://github.com/greenaddress/GreenBits/commit/1d5da879a71da8060d5ad6a784d318f7f0c63515


- name: Close Immediately
  description: Close resources immediately after they are no longer necessary. E.g., Wakelocks
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/104
    commits:
      - https://github.com/deltachat/deltachat-android/commit/ba1b5211a2167809c7b92cad64f2a65247669f0a

- name: Open Immediately Before
  description: Only open resources if will be immediately necessary.

- name: Push / Poll FIXME
  description: don't do active query for new messages and wait for push notification from mail server (not shure if this works stable in every use case).
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/186
      - https://github.com/nextcloud/android/issues/1654 FIXME

- name: Power Save mode
  description: provide an energy savior mode whenever the device enters a power save  mode.
  context: Whenever the battery is running low the device can enter a power save mode to assure users can extend the battery life until they reach a charging station. In some systems, this mode can be manually activated by users.
  solution: implement a mode in which the app will use less resources while providing the minimum functionality that is indispensible to the user. This can include deactivating some features, reducing update intervals, or deactivating animated effects in the UI.
  occurrences_android:
    issues:
      -
    commits:
      - https://github.com/nextcloud/android/commit/8bc432027e0d33e8043cf40192203203a40ca29c
      - https://github.com/nextcloud/android/commit/ef7900a6a470469e2bce57b1458747dd9053afd1

- name: Lazy first - Defer
  description: Delay battery intensive operations until the device is connected to a charger.
  context: There are operations that do not have high priority and do not need to execute immediately (e.g., backup data in the cloud). However, these operations can be intensive and thus drain energy.
  solution: Delay intensive operations until the device is connected to a charger. Since whenever the device is connected to power, the battery might be running low, it might be advisable to wait until the power save mode is deactivated (or until a pre-defined battery level is reached).
  occurrences_android:
    issues:
      - https://github.com/nextcloud/android/issues/1803
    commits:
    pull_requests:
      - https://github.com/nextcloud/android/pull/1527
  references:
    - title: Android Developer Guides — Optimizing for Battery Life
      url: https://developer.android.com/topic/performance/power/index.html

- name: WiFi over Cellular (lazy first - defer)
  description: Delay heavy data connections until the device is connected to a WiFi network.
  context: Data needs to be syncronized with a server but it is not high priority and can be delayed.
  solution: Data connections using cellular networks are usually more battery intensive than connections using WiFi.  Low priority operations that require a data connection to exchange considerable amounts of data should be delayed until a WiFi connection is available.
  occurrences_android:
    issues:
      - https://github.com/nextcloud/android/issues/1626
      - https://github.com/nextcloud/android/issues/1105
      - https://github.com/nextcloud/android/issues/844
    commits:
    pull_requests:
  references:
    - title: Does Wi-Fi Consume More Battery Power Than 3G or 4G/LTE?
      authors: Mitch Bartlett
      url: https://www.technipages.com/does-wi-fi-consume-more-battery-power-than-3g-or-4glte


- name: No Ads
  occurrences_android:
    issues: https://github.com/mozilla-mobile/focus-android/issues/2082

- name: Play on demand (is this anti pattern?)
  description: Do not automatically start playing media content.
  context:
  occurrences_android:
    issues:
      - https://github.com/mozilla-mobile/focus-android/issues/2003

- name: Constant notification (anti pattern)
  occurrences_android:
    issues: https://github.com/nextcloud/android/issues/2130

- name: Kill the app optimizer (anti pattern)
  description: most battery optimizers are actually app killers. However, very often users are not aware of the implications of battery optimiers that are running on their devices. Thus, users assume that apps are misfunctioning due to their poor quality.
  occurrences_android:
    issues:
      - https://github.com/siacs/Conversations/issues/2775
      - https://github.com/siacs/Conversations/issues/1725
    commits:
      - https://github.com/siacs/Conversations/commit/d5608cb4f3bd357e46513a38b8f3676049992dcc
      - https://github.com/siacs/Conversations/commit/e6a9829dd2b275f80231b19930fbb75b209f4c2e
      - https://github.com/siacs/Conversations/commit/aa6955a0d687c0310d69658d0a68facb798daaf6
      - https://github.com/siacs/Conversations/commit/c296d6f4466e2616432660bb01465f3746e1bb65
      - https://github.com/quarck/CalendarNotification/commit/118d6802e539e10c0fabd0f968de8e57ed2446e0
      - https://github.com/deltachat/deltachat-android/commit/e2225be331d4c041510b988d03f171b7532a1355
      - https://github.com/deltachat/deltachat-android/commit/b941b9e21a2787308755f092ce92ca048bdbcd84
